# 了解一个软件的世界

# 04 三步走： 如何了解一个软件的设计？

对软件设计是什么，以及要考虑那些因素有了了解后，就开始正式对旅程了。

做为一个程序员，在职业生涯中一定会接手新项目，承担维护该项目对职责。如果一个新项目摆在面前，如何去研究呢？

## 模型、接口和实现

了解一个软件的设计可以从三个部分着手： **模型、接口和实现**。


## 了解设计三步走

之所以要把模型、接口和实现区分开来，是因为这三者关注点不同，而很多人讨论所谓的“设计”时，经常把它们混在一起。

正确的做法是什么呢？就是你在讨论设计的时候应该遵循一个顺序： 先模型，在接口，最后实现。 同理，了解一个设计，也应该遵循这样的顺序。

## 总结时刻

要了解一个软件设计，可以从三部分入手：模型、接口和实现。

+ 模型，也可以称为抽象，是一个软件的核心部分，是这个系统与其他系统有所区别的关键，是我们理解整个软件设计最核心的部分。
+ 接口，是通过怎样的方式将模型提供的能力暴露出去，是我们与这个软件交互的入口。
+ 实现，就是软件提供的模型和接口在内部是如何实现的，是软件能力得以发挥的根基。

了解设计的顺序应该是，**先模型，再接口，最后是实现。** 了解设计，需要一层一层地展开，在每个层次都按照模型、接口和实现进行理解，在头脑中形成一棵设计树。

如果只能记住一件事，那就记住：**了解设计，先模型，再接口，最后是实现。**

```
如何了解一个软件的设计

# 1 模型
    定义
        这个系统与其他系统有所区别的关键
        我们理解整个软件设计最核心的部分

# 2 接口
    定义
        通过怎样的方式将模型提供的能力暴露出去
        我们与这个软件交互的入口

# 3 实现
    定义
        软件提供的模型和接口在内部是如何实现的
        软件能力得以发挥的根基


```

```
```

# 05 sping DI 容器：如何分析一个软件的模型？

了解软件设计的第一步是模型。如果拿到一个项目，怎么去理解它的模型呢？

**我们肯定要先知道项目提供了那些模型，模型又提供了怎样的能力。**

**理解一个模型的关键在于，要了解这个模型设计的来龙去脉，知道它是如何解决相应的问题。**

以 Spring 的 DI 容器为例，来看看怎么样理解软件的模型。

## 耦合的依赖

## 分离的依赖

## 总结时刻

了解设计的第一步：看模型。 **理解模型，要知道项目提供了那些模型，这些模型都提供了怎样的能力。**但还有更重要但一步就是，**要了解模型设计的来龙去脉。** 这样，一方面，可以增进我们对它的了解，但另一方面，也会减少我们对模型的破坏或滥用。

以 Spring 的 DI 容器为例，了解如何理解模型，DI容器的引入有效地解决了对象的创建和组装的问题，让程序员们拥有了一个新的编程模型。

按照这个编程模型去写代码，整体的质量会得到大幅度提升，也会规避之前很多问题。这也是一个好的模型对项目起到的促进作用。象DI这种设计的非常好的模型，你甚至不觉得自己在用一个特定的模型在编程。

如果只能记住一件事，那就记住：**理解模型，要了解模型设计的来龙去脉。**

```
如何分析软件的模型

# 两个步骤
    知道项目提供了哪些模型，这些模型都提供了怎么样的能力
    要了解模型设计的来龙去脉
  
# 以 Spring DI容器为例
    “依赖注入”（Dependency Injection，简称 DI ）
    有效解决了对象创建和组装的问题
    让程序员们有了一个新的编程模型

```

有了对模型的了解，已经迈出了理解设计的第一步，下面要思考如何理解接口。

```
```

# 05 Ruby on Rails: 如何分析一个软件的接口？

任何一个项目中，接口的数量都不是一个小数目。仅仅一个普通的程序库，里面的接口少则几十个，多则成百上千。难道我们理解接口，即使要一个一个地读这些接口吗？

显然不是，那如何才能在复杂的接口中，理出思路呢？**找主线，看风格。**

以 Ruby on Rails 为例来思考接口，因为它的设计风格是可以有很多震撼的，无论是编程接口的优雅，还是开发过程接口的顺畅。不过看设计先看模型，应该快速了解一下它的模型。

## Ruby on Rails 模型

有了主线之后，我们就开始从中了解接口的风格。Rails提供了三种接口，分别是：

+ Web 应用对外暴露的接口： REST API；
+ 程序员写程序时用到的接口： API；
+ 程序员在开发过程中用到的接口： 命令行；

## REST接口

## API接口

## 命令行接口

## 总结时刻

了解设计的第二部分：看接口。看接口的一个方法是**找主线，看风格。**先找到一条功能主线，对项目建立起结构性的了解。有了主线之后，再沿着主线把相关接口梳理出来。

查看接口，关键要看接口的风格，也就是项目作者引导人们怎么样使用接口。在一个项目里，统一接口风格也是很重要的一个方面，所以熟悉现有的接口风格，保持统一也是非常重要的。

以一个曾经火爆的 Web开发框架： Ruby on Rails. 这个框架提供的接口包括：

+ Web应用对外暴露的接口： REST API；
+ 程序员写程序时用到的接口： API；
+ 程序员在开发过程中用到的接口： 命令行。

从 Rails 的接口设计中，可以看到一个好的接口设计，无论是从最佳实践的引入，或是API设计风格的引导，都可以帮助我们建立良好的开发习惯。

如果只能记住一件事，那就记住： **理解一个项目的接口，先找主线，再看风格。**

```
如何分析软件的接口

# 两个步骤
    找主线
        --方法
            找到功能主线，对项目建立结构性认知
            沿着主线把相关接口梳理出来
        --工具
            起步走文档
    看风格
        --含义
            接口希望你怎样使用它，或者怎样在上面继续开发
        --意义
            看出设计者的品味
            维护项目的一致性

# 以 Ruby on Rails 为例
    模型
        基于MVC模型进行开发的Web框架
        设计理念  约定优于配置
    三种接口
        --REST API
            Web应用对外暴露的接口
            实用、更容易落地
        --API
            程序员写程序时用到的接口
            简单、表达性好
        --命令行
            在开发过程中用到的接口
            融合软件工程的最佳实践



```

当理解了模型和接口，接下来就看实现了。

```
```

# 07 Kafka : 如何分析一个软件的实现？

了解设计的第三个部分是 看实现。在一个系统中模型和接口是相对稳定的部分。但是，同样的模型和接口，如果采用不同的实现，稳定性、可扩展性和性能等诸多方面相差极大。而且，只有了解实现，你才有改动代码的基础。

但是，不得不说，“看实现”是一个很大的挑战，因为有无数的细节在等着。所以很多团队中，一个 新人甚至会用长达几个月的时间去熟悉代码中的细节。

对于实现的熟悉，怎么展开呢？ 你需要找到两个关键点： 软件的结构 和 关键的技术。

以开源软件 Kafka为例，看如何把地图展开，去看一个软件的实现。按照一个软件设计的思路，步骤是“先模型、在接口、最后看实现”。所以要先了解Kafka的模型和接口。

## 消息队列的模型和接口

## 软件的结构

当我们想去看一个软件的实现时，有两件事特别重要： 软件的结构和关键的技术。

## 关键的技术

## 总结时刻

了解实现的第三部分： 看实现。 理解一个实现，是对模型和接口的理解为前提的。

每个系统的实现都有非常多的细节，我们不可能一上来就把所有细节吃透。如果想了解一个系统的实现，应该从**软件结构**和**关键技术**两方面入手。无论是软件结构，还是关键技术，我们都需要带着自己的问题入手，而问题的出发点就是我们对模型和接口的理解。

了解软件的结构，其实，就是把分层的模型展开，看下一层的模型。一方面，你要知道这个层次给你提供了怎样的模型，另一方面，你要带着自己的问题去了解这些模型为什么这么设计。

最后，接着 Kafka的关键技术，讲了**软硬结合**的思路，在系统优化之路上寻求突破时，可以增加你选择的道路。不过，实现都是有约束的，比如 Kafka的实现主要是针对机械硬盘做的优化，现在的SSD盘越来越多，成本越来越低，这个立意的出发点已经不像以前那样稳固了。

如果只能记住一件事，那就记住： **理解实现，带着自己的问题，了解软件的结构和关键的技术。**

```
如何分析软件的实现

# 两个关键点
    --软件的结构
        含义： 软件分层模型
        工具： 结构图
    --关键的技术
        含义： 让这个软件的“实现”与众不同的地方
        -- 带着问题入手
 
# 以 Kafka 为例
    --模型和接口
        以消息队列为核心模型
        以生产和消费为接口
    --实现
        结构： 生产者、消费者和集群三部分组成
        技术
            有序的特性
            软硬结合的思路


```

了解完模型、接口、实现三部分，对于设计的了解就知道了。 下面就是自己的设计历程了，自己设计软件，需要掌握一些有关设计的基础知识。

```
```
